<title>
	Alysii"s PI Scheme</title>
<style type="text/css" media="screen">
body {
	background-color: #000;
}

body,
td {
	font: .8em Gotham, Helvetica Neue, Helvetica, Arial Narrow, Arial;
	font-weight: 500;
	color: #666;
	padding: 0;
	margin: 0;
}

ul {
	list-style: none none;
	margin: 0;
	padding: 0;
	display: block;
}

a,
a:link {
	color: #ffcc00;
	text-decoration: none;
}

td {
	padding: 4px 4px;
	text-align: center;
	border: 1px solid #111;
	border-width: 1px 0;
}

tr:last-child td {
	border-bottom-width: 0;
}

tr.header td {
	padding: 10px 4px;
	font-size: 1.5em;
	font-weight: 200;
	color: #aaa;
	cursor: pointer;
}

tr.header td i {
	font-size: .4em;
	font-weight: 200;
	font-style: normal;
}

.items li {
	margin: 5px 0px;
}

.items li.current span {
	text-shadow: 0px 0px 8px #79cef4;
}

.arrows li {
	margin: 5px 0px;
	color: #333;
}

.items li span {
	white-space: nowrap;
	cursor: pointer;
	/*background-color: rgba(0, 0, 0, 0.75);*/
	border-radius: 3px;
	padding: 1px 4px;
}

tr.footer {
	display: none;
}





/*tr.footer td { color: #111; }
	.p1 td,.p2 td,.p3 td,.p4 td,
	.p1,.p2,.p3,.p4 { font-weight: 900 !important; }
	.p1.current,.p2.current,.p3.current,.p4.current,
	.p1.current td,.p2.current td,.p3.current td,.p4.current td { color: red; }*/

#canvas {
	z-index: 1;
	display: block;
	position: absolute;
	left: 0;
	top: 0;
	background-color: transparent;
}

#pi {
	z-index: 2;
	border-collapse: collapse;
	position: relative;
	left: 0;
	top: 0;
}

.out {
	font-size: 10;
}

.desc:before {
	content: "↓";
}

.asc:before {
	content: "↑";
}
</style>

<body>
	<table id="pi" border="0" cellpadding="0" cellspacing="0" width="100%">
		<tr class="header">
			<td valign="top">Planets</td>
			<td valign="top" colspan="3" style="text-align: right;">Resources
				<br> <i>P0 - x<span class="mult" data-mult="24000">24000</span></i></td>
			<td valign="top"></td>
			<td valign="top" colspan="3" style="text-align: left;">Basic
				<br> <i>P1 - x<span class="mult" data-mult="160">160</span></i></td>
			<td valign="top"></td>
			<td valign="top" colspan="3">Refined
				<br> <i>P2 - x<span class="mult" data-mult="20">20</span></i></td>
			<td valign="top"></td>
			<td valign="top" colspan="3">Specialized
				<br> <i>P3 - x<span class="mult" data-mult="6">6</span></i></td>
			<td valign="top"></td>
			<td valign="top" colspan="3">Advanced
				<br> <i>P4 - x<span class="mult" data-mult="1">1</span></i></td>
		</tr>
		<tr>
			<td class="items">
				<ul id="planets">
					<li>Barren</li>
					<li>Gas</li>
					<li>Ice</li>
					<li>Lava</li>
					<li>Oceanic</li>
					<li>Plasma</li>
					<li>Storm</li>
					<li>Temperate</li>
				</ul>
			</td>
			<td colspan="3" class="items" style="text-align: right;">
				<ul id="resources">
					<li class="barren gas ice oceanic storm temperate">Aqueous Liquids</li>
					<li class="temperate">Autotrophs</li>
					<li class="barren gas lava plasma storm">Base Metals</li>
					<li class="barren oceanic temperate">Carbon Compounds</li>
					<li class="oceanic temperate">Complex Organisms</li>
					<li class="lava">Felsic Magma</li>
					<li class="ice lava plasma">Heavy Metals</li>
					<li class="gas storm">Ionic Solutions</li>
					<li class="barren ice oceanic temperate">Microorganisms</li>
					<li class="gas ice storm">Noble Gas</li>
					<li class="barren plasma">Noble Metals</li>
					<li class="lava plasma">Non-CS Crystals</li>
					<li class="ice oceanic">Planktic Colonies</li>
					<li class="gas">Reactive Gas</li>
					<li class="lava plasma storm">Suspended Plasma</li>
				</ul>
			</td>
			<td>
				<ul class="arrows">
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
					<li>&rarr;</li>
				</ul>
			</td>
			<td colspan="3" class="items" style="text-align: left;">
				<ul id="basic">
					<li class="aqueous-liquids">Water</li>
					<li class="autotrophs">Industrial Fibers</li>
					<li class="base-metals">Reactive Metals</li>
					<li class="carbon-compounds">Biofuels</li>
					<li class="complex-organisms">Proteins</li>
					<li class="felsic-magma">Silicon</li>
					<li class="heavy-metals">Toxic Metals</li>
					<li class="ionic-solutions">Electrolytes</li>
					<li class="microorganisms">Bacteria</li>
					<li class="noble-gas">Oxygen</li>
					<li class="noble-metals">Precious Metals</li>
					<li class="non-cs-crystals">Chiral Structures</li>
					<li class="planktic-colonies">Biomass</li>
					<li class="reactive-gas">Oxidizing Compound</li>
					<li class="suspended-plasma">Plasmoids</li>
				</ul>
			</td>
			<td class="items"></td>
			<td colspan="3" class="items">
				<ul id="refined">
					<li class="biofuels precious-metals">Biocells</li>
					<li class="reactive-metals toxic-metals">Construction Blocks</li>
					<li class="toxic-metals chiral-structures pos">Consumer Electronics</li>
					<li class="electrolytes water pos">Coolant</li>
					<li class="precious-metals toxic-metals pos">Enriched Uranium</li>
					<li class="bacteria proteins">Fertilizer</li>
					<li class="proteins biomass">Gen. Enhanced Livestock</li>
					<li class="proteins biofuels">Livestock</li>
					<li class="reactive-metals precious-metals pos">Mechanical Parts</li>
					<li class="industrial-fibers silicon">Microfiber Shielding</li>
					<li class="chiral-structures silicon">Miniature Electronics</li>
					<li class="bacteria reactive-metals">Nanites</li>
					<li class="oxidizing-compound oxygen">Oxides</li>
					<li class="oxidizing-compound industrial-fibers">Polyaramids</li>
					<li class="biofuels industrial-fibers">Polytextiles</li>
					<li class="plasmoids electrolytes">Rocket Fuel</li>
					<li class="oxidizing-compound silicon">Silicate Glass</li>
					<li class="plasmoids water">Superconductors</li>
					<li class="oxygen biomass">Supertensile Plastics</li>
					<li class="electrolytes oxygen">Synthetic Oil</li>
					<li class="bacteria water">Test Cultures</li>
					<li class="plasmoids chiral-structures">Transmitter</li>
					<li class="bacteria biomass">Viral Agent</li>
					<li class="reactive-metals water">Water-Cooled CPU</li>
				</ul>
			</td>
			<td class="items"></td>
			<td colspan="3" class="items">
				<ul id="specialized">
					<li class="nanites livestock construction-blocks">Biotech Research Reports</li>
					<li class="silicate-glass rocket-fuel">Camera Drones</li>
					<li class="oxides coolant">Condensates</li>
					<li class="test-cultures synthetic-oil fertilizer">Cryoprotectant Solution</li>
					<li class="supertensile-plastics microfiber-shielding">Data Chips</li>
					<li class="biocells oxides superconductors">Gel-Matrix Biopaste</li>
					<li class="water-cooled-cpu transmitter">Guidance Systems</li>
					<li class="polytextiles viral-agent transmitter">Hazmat Detection Systems</li>
					<li class="polyaramids gen-enhanced-livestock">Hermetic Membranes</li>
					<li class="polyaramids transmitter">High-Tech Transmitters</li>
					<li class="fertilizer polytextiles">Industrial Explosives</li>
					<li class="biocells silicate-glass">Neocoms</li>
					<li class="microfiber-shielding enriched-uranium">Nuclear Reactors</li>
					<li class="supertensile-plastics mechanical-parts miniature-electronics">Planetary Vehicles</li>
					<li class="mechanical-parts consumer-electronics pos">Robotics</li>
					<li class="construction-blocks miniature-electronics">Smartfab Units</li>
					<li class="water-cooled-cpu coolant consumer-electronics">Supercomputers</li>
					<li class="supertensile-plastics test-cultures">Synthetic Synapses</li>
					<li class="biocells nanites">Transcranial Microcontrollers</li>
					<li class="synthetic-oil superconductors">Ukomi Super Conductors</li>
					<li class="livestock viral-agent">Vaccines</li>
				</ul>
			</td>
			<td class="items" style=""></td>
			<td colspan="3" class="items" style="">
				<ul id="advanced">
					<li class="neocoms data-chips high-tech-transmitters">Broadcast Node</li>
					<li class="gel-matrix-biopaste hazmat-detection-systems planetary-vehicles">Integrity Response Drones</li>
					<li class="industrial-explosives ukomi-super-conductors reactive-metals">Nano-Factory</li>
					<li class="condensates robotics bacteria">Organic Mortar Applicators</li>
					<li class="synthetic-synapses guidance-systems transcranial-microcontrollers">Recursive Computing Module</li>
					<li class="camera-drones nuclear-reactors hermetic-membranes">Self-Harmonizing Power Core</li>
					<li class="smartfab-units vaccines water">Sterile Conduits</li>
					<li class="supercomputers biotech-research-reports cryoprotectant-solution">Wetware Mainframe</li>
				</ul>
			</td>
		</tr>
		<tr class="p1 footer">
			<td></td>
			<td></td>
			<td>3000<i>u</i></td>
			<td></td>
			<td>&rarr;</td>
			<td></td>
			<td>20<i>u</i></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr class="p2 footer">
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td>40<i>u</i></td>
			<td></td>
			<td>&rarr;</td>
			<td></td>
			<td>5<i>u</i></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr class="p3 footer">
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td>10<i>u</i></td>
			<td></td>
			<td>&rarr;</td>
			<td></td>
			<td>3<i>u</i></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr class="p4 footer">
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td>40<i>u</i></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td>6<i>u</i></td>
			<td></td>
			<td>&rarr;</td>
			<td></td>
			<td>1<i>u</i></td>
			<td></td>
		</tr>
		<tr>
			<td style="width: 8%;">&nbsp;</td>
			<td style="width: 12%;">&nbsp;</td>
			<td style="width: 4%;">&nbsp;</td>
			<td style="width: 1%;">&nbsp;</td>
			<td style="width: 1%;">&nbsp;</td>
			<td style="width: 1%;">&nbsp;</td>
			<td style="width: 4%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
			<td style="width: 1%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
			<td style="width: 1%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
			<td style="width: 1%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
			<td style="width: 4%;">&nbsp;</td>
			<td style="width: 7%;">&nbsp;</td>
		</tr>
	</table>
	<div>
		<input type="checkbox" id="showCost" checked>Show cost 
		<div id="CostRadio" style="display: inline">
			<input type="radio" id="perItem" name="cost" value="perItem">
			<label for="perItem">per Item</label>
			<input type="radio" id="perBatch" name="cost" value="perBatch" checked>
			<label for="perBatch">per Batch</label>
		</div>
	</div>
	<canvas id="canvas"></canvas>
	<div style="position: fixed; bottom: 0; text-align: center; width: 100%;">
		Use ESI average price. sorting on click on column title. 
		<br> Based on https://hanns.io/pi/
		<br>
		<small style="font-size: 0.6em">EVE Online and the EVE logo are the registered trademarks of CCP hf. All rights are reserved worldwide. All other trademarks are the property of their respective owners. EVE Online, the EVE logo, EVE and all associated logos and designs are the intellectual property of CCP hf. All artwork, screenshots, characters, vehicles, storylines, world facts or other recognizable features of the intellectual property relating to these trademarks are likewise the intellectual property of CCP hf. CCP hf. has granted permission to [insert your name or site name] to use EVE Online and all associated logos and designs for promotional and information purposes on its website but does not endorse, and is not in any way affiliated with, [insert name or site name]. CCP is in no way responsible for the content on or functioning of this website, nor can it be liable for any damage arising from the use of this website.</small>
	</div>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
/*eslint-env jquery, browser */
/*eslint quotes: "warn", no-console: "off" */

var colors = ["#666", "#492f1f", "#763c19", "#f7941d", "yellow", "#79cef4", "#00aeef", "lime", "green", "#304b15"];

$(document).ready(function() {
	$(".items li").css({ color: colors[0] });

	canvas();
	$(window).resize(function() { // todo: get event, only repaint on mouse release
		canvas();
	});

	// distribute before list to span
	$(".items ul li")
		.wrapInner($("<span />"))
		.each(function() {
			var item = lower_case($(this).children("span").html()); // turn item name css compliant
			$(this).attr({ id: item }); // set li id as item name

			if ($(this).parents("ul").attr("id") != "planets") { // planets has no before
				var list = $(this).attr("class").split(/\s+/); // get before items from li class
				for (var i in list) {
					$("#" + list[i] + " span").addClass(item); // find id with class, inject itself into span as class
				}
			}
		});

	$(".items")
		.on("mouseenter", "ul li", function() {
			if (!$("#pi").hasClass("sticky")) {
				$(this).addClass("current");
				$(this).css({ color: colors[5] });
				pi_link($(this));
			}
		})
		.on("mouseleave", "ul li", function() {
			if (!$("#pi").hasClass("sticky")) {
				$(this).removeClass("current");
				$(".items li").css({ color: colors[0] });
				canvas();
			}
		})
		.on("click", "ul li", function() {
			if (!$(this).hasClass("current")) {
				$("#pi").removeClass("sticky");
			}

			if ($("#pi").hasClass("sticky")) {
				$("#pi").removeClass("sticky");

				$(".items li").removeClass("current").css({ color: colors[0] });
			} else {
				$("#pi").addClass("sticky");

				$(".items li").removeClass("current").css({ color: colors[0] });
				canvas();

				$(this).addClass("current");
				$(this).css({ color: colors[5] });
				pi_link($(this));
			}
		});


	// $("ul#basic").hover(function() { $(".p1").toggleClass("current"); });
	// $("ul#refined").hover(function() { $(".p2").toggleClass("current"); });
	// $("ul#specialized").hover(function() { $(".p3").toggleClass("current"); });
	// $("ul#advanced").hover(function() { $(".p4").toggleClass("current"); });

	// $("#disco").toggle(
	// 	function() {
	// 		$(this).text("Disco!");
	// 	},
	// 	function() {
	// 		$(this).text("Planets");
	// 	}
	// );

	var pi_data = [{ "name": "Aqueous Liquids", "type_id": 2268 }, { "name": "Autotrophs", "type_id": 2305 }, { "name": "Base Metals", "type_id": 2267 }, { "name": "Carbon Compounds", "type_id": 2288 }, { "name": "Complex Organisms", "type_id": 2287 }, { "name": "Felsic Magma", "type_id": 2307 }, { "name": "Heavy Metals", "type_id": 2272 }, { "name": "Ionic Solutions", "type_id": 2309 }, { "name": "Microorganisms", "type_id": 2073 }, { "name": "Noble Gas", "type_id": 2310 }, { "name": "Noble Metals", "type_id": 2270 }, { "name": "Non-CS Crystals", "type_id": 2306 }, { "name": "Planktic Colonies", "type_id": 2286 }, { "name": "Reactive Gas", "type_id": 2311 }, { "name": "Suspended Plasma", "type_id": 2308 }, { "name": "Bacteria", "type_id": 2393 }, { "name": "Biofuels", "type_id": 2396 }, { "name": "Biomass", "type_id": 3779 }, { "name": "Chiral Structures", "type_id": 2401 }, { "name": "Electrolytes", "type_id": 2390 }, { "name": "Industrial Fibers", "type_id": 2397 }, { "name": "Oxidizing Compound", "type_id": 2392 }, { "name": "Oxygen", "type_id": 3683 }, { "name": "Plasmoids", "type_id": 2389 }, { "name": "Precious Metals", "type_id": 2399 }, { "name": "Proteins", "type_id": 2395 }, { "name": "Reactive Metals", "type_id": 2398 }, { "name": "Silicon", "type_id": 9828 }, { "name": "Toxic Metals", "type_id": 2400 }, { "name": "Water", "type_id": 3645 }, { "name": "Biocells", "type_id": 2329 }, { "name": "Construction Blocks", "type_id": 3828 }, { "name": "Consumer Electronics", "type_id": 9836 }, { "name": "Coolant", "type_id": 9832 }, { "name": "Enriched Uranium", "type_id": 44 }, { "name": "Fertilizer", "type_id": 3693 }, { "name": "Gen. Enhanced Livestock", "type_id": 15317 }, { "name": "Livestock", "type_id": 3725 }, { "name": "Mechanical Parts", "type_id": 3689 }, { "name": "Microfiber Shielding", "type_id": 2327 }, { "name": "Miniature Electronics", "type_id": 9842 }, { "name": "Nanites", "type_id": 2463 }, { "name": "Oxides", "type_id": 2317 }, { "name": "Polyaramids", "type_id": 2321 }, { "name": "Polytextiles", "type_id": 3695 }, { "name": "Rocket Fuel", "type_id": 9830 }, { "name": "Silicate Glass", "type_id": 3697 }, { "name": "SuperConductors", "type_id": 9838 }, { "name": "Supertensile Plastics", "type_id": 2312 }, { "name": "Synthetic Oil", "type_id": 3691 }, { "name": "Test Cultures", "type_id": 2319 }, { "name": "Transmitter", "type_id": 9840 }, { "name": "Viral Agent", "type_id": 3775 }, { "name": "Water-Cooled CPU", "type_id": 2328 }, { "name": "Biotech Research Reports", "type_id": 2358 }, { "name": "Camera Drones", "type_id": 2345 }, { "name": "Condensates", "type_id": 2344 }, { "name": "Cryoprotectant Solution", "type_id": 2367 }, { "name": "Data Chips", "type_id": 17392 }, { "name": "Gel-Matrix Biopaste", "type_id": 2348 }, { "name": "Guidance Systems", "type_id": 9834 }, { "name": "Hazmat Detection Systems", "type_id": 2366 }, { "name": "Hermetic Membranes", "type_id": 2361 }, { "name": "High-Tech Transmitters", "type_id": 17898 }, { "name": "Industrial Explosives", "type_id": 2360 }, { "name": "Neocoms", "type_id": 2354 }, { "name": "Nuclear Reactors", "type_id": 2352 }, { "name": "Planetary Vehicles", "type_id": 9846 }, { "name": "Robotics", "type_id": 9848 }, { "name": "Smartfab Units", "type_id": 2351 }, { "name": "Supercomputers", "type_id": 2349 }, { "name": "Synthetic Synapses", "type_id": 2346 }, { "name": "Transcranial Microcontrollers", "type_id": 12836 }, { "name": "Ukomi Super Conductors", "type_id": 17136 }, { "name": "Vaccines", "type_id": 28974 }, { "name": "Broadcast Node", "type_id": 2867 }, { "name": "Integrity Response Drones", "type_id": 2868 }, { "name": "Nano-Factory", "type_id": 2869 }, { "name": "Organic Mortar Applicators", "type_id": 2870 }, { "name": "Recursive Computing Module", "type_id": 2871 }, { "name": "Self-Harmonizing Power Core", "type_id": 2872 }, { "name": "Sterile Conduits", "type_id": 2875 }, { "name": "Wetware Mainframe", "type_id": 2876 }];


	// загрузка цен
	$.getJSON("https://esi.tech.ccp.is/latest/markets/prices/?datasource=tranquility", function(json) {
		console.log("markets prices downloaded");
		for (var i = 0; i < pi_data.length; i++) {
			for (var j = 0; j < json.length; j++) {
				if (pi_data[i].type_id === json[j].type_id) {
					// pi_data[i].average_price = price;
					$("#" + lower_case(pi_data[i].name)).data("price", json[j].average_price)
						.append("<span class='out'></span>");
					console.log(pi_data[i].name + ": " + json[j].average_price);
				}
			}
		}
		draw_price();
		console.log("draw price done");
	});

	$("input:radio[name='cost']").change(function() {
		if (this.checked && this.value == "perItem") {
			$(".header .mult").text(1);
		}
		if (this.checked && this.value == "perBatch") {
			$(".header .mult").each(function() {
				$(this).text($(this).data("mult"));
			});
		}
		draw_price();
	});

	$("#showCost").change(function() {
		if (this.checked) {
			$(".out, .mult, #CostRadio").show();
		} else {
			$(".out, .mult, #CostRadio").hide();
		}
	});


	// сортировка
	$(".header td[colspan='3']").on("click", function() {
		var ul = $("table tr:eq(1) td:eq(" + $(this).index() + ") ul");
		if ($(this).hasClass("desc")) {
			$(this).removeClass("desc").addClass("asc");
			$(ul).children("li").sort(sort_asc) //сортировка
				.appendTo(ul); // append again to the list
			return;
		}
		if (($(this).hasClass("asc")) || !($(this).hasClass("desc"))) {
			$(this).removeClass("asc").addClass("desc");
			$(ul).children("li").sort(sort_desc) //сортировка
				.appendTo(ul); // append again to the list
			return;
		}
	});
});

function lower_case(s) { return s.toLowerCase().replace(/ /g, "-").replace(/\./g, ""); }

function pi_link(item) {
	pi_link_before(item, -1);
	pi_link_after(item, 1);
}

function pi_link_before(item, degree, depth) {
	var type = item.parent("ul").attr("id");
	degree = degree + ((type == "basic") ? 1 : 0);

	// var class_prefex = ".items li span.";
	$(".items li span." + item.attr("id"))
		.each(function() {
			$(this).parent("li").css({ color: colors[5 + degree] });
			if (type != "basic" && degree > -4) {
				line(item.children("span"), $(this), colors[5 + degree], colors[5 + degree + 1]);
			}
			pi_link_before($(this).parent("li"), degree - 1);
		});
}

function pi_link_after(item, degree, depth) {
	var type = item.parent("ul").attr("id");
	degree = degree + ((type == "resources") ? -1 : 0);

	$(".items li." + item.attr("id"))
		.each(function() {
			$(this).css({ color: colors[5 + degree] });
			if (type != "resources" && degree < 3) {
				line($(this).children("span"), item.children("span"), colors[5 + degree - 1], colors[5 + degree]);
			}
			pi_link_after($(this), degree + 1);
		});
}

function draw_price() {
	$(".out")
		.each(function() {
			var price = $(this).parent().data("price");
			var mult = $("table tr:eq(0) td:eq(" + $(this).parents("td").index() + ") .mult").text();
			$(this).text(format_price(price * mult));
		});
}

function sort_asc(a, b) { return ($(b).data("price")) < ($(a).data("price")) ? 1 : -1; }
// desc по убыванию
function sort_desc(a, b) { return ($(b).data("price")) > ($(a).data("price")) ? 1 : -1; }

function format_price(price) {
	if (price < 100) return (price);
	return price.toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
}

function canvas() {
	$("#canvas").attr({
		"height": $("#pi").outerHeight(),
		"width": $("#pi").outerWidth()
	});
}

function line(a, b, c1, c2) {
	// var pad = 0;
	var fx = a.position().left + 4;
	var fy = a.position().top + a.height() / 2 + 1;
	var tx = b.position().left + b.width() + 2;
	var ty = b.position().top + b.height() / 2 + 1;

	var cvs = document.getElementById("canvas");

	var ctx = cvs.getContext("2d");
	ctx.lineWidth = 1;
	ctx.beginPath();
	ctx.moveTo(tx, ty);
	ctx.lineTo(fx, fy);
	ctx.globalAlpha = 0.5;

	var gdt = ctx.createLinearGradient(tx, ty, fx, fy);
	gdt.addColorStop(0, c1);
	gdt.addColorStop(1, c2);

	ctx.strokeStyle = gdt;
	ctx.stroke();
}
</script>